<div class="navbar-sidebar-wrapper">
  <!-- Desktop sidebar -->
  <nav class="scoop-side-navbar" *ngIf="!isMobileView">
    <ul class="scoop-navbar-list">
      <!--
       <li *ngIf="canSeeRegisterItem()" routerLink="/registro-usuarios" routerLinkActive="active"
        class="scoop-navbar-item">
        <span class="material-icons">person_add</span>
        <span>Registro</span>
      </li>

-->
      <li *ngIf="canSeeRegisterItem()" class="dropdown">
        <button class="scoop-navbar-item" type="button" data-bs-toggle="dropdown" aria-expanded="false"
          style="width: 100%; text-align: left; border: none; background: none;">
          <span class="material-icons">person_add</span>
          <span>Registro</span>
          <span class="dropdown-arrow">▼</span>
        </button>

        <ul class="dropdown-menu scoop-dropdown-menu" aria-labelledby="dropdownMenuButton">
          <li>
            <a class="dropdown-item scoop-dropdown-item" *ngIf="canSeeAdminItems()"
              routerLink="registro-usuarios/administrador" routerLinkActive="active">
              <span class="material-icons">admin_panel_settings</span>
              Registrar Admin
            </a>
          </li>
          <li>
            <a class="dropdown-item scoop-dropdown-item" routerLink="/registro-usuarios/maestro"
              *ngIf="canSeeTeacherItems()" routerLinkActive="active">
              <span class="material-icons">people</span>
              Registrar Maestro
            </a>
          </li>
          <li>
            <a class="dropdown-item scoop-dropdown-item" routerLink="/registro-usuarios/alumno"
              *ngIf="canSeeStudentItems()" routerLinkActive="active">
              <span class="material-icons">school</span>
              Registrar Alumno
            </a>
          </li>

          <li>
            <a class="dropdown-item scoop-dropdown-item" routerLink="/registro-usuarios/materias"
              *ngIf="canSeeAdminItems()" routerLinkActive="active">
              <span class="material-icons">library_books</span>
              Registrar Materias
            </a>
          </li>

        </ul>
      </li>


      <li *ngIf="canSeeAdminItems()" routerLink="/administrador" routerLinkActive="active" class="scoop-navbar-item">
        <span class="material-icons">admin_panel_settings</span>
        <span>Admins</span>
      </li>

      <li *ngIf="canSeeTeacherItems()" routerLink="/maestros" routerLinkActive="active" class="scoop-navbar-item">
        <span class="material-icons">people</span>
        <span>Maestros</span>
      </li>
      <li *ngIf="canSeeStudentItems()" routerLink="/alumnos" routerLinkActive="active" class="scoop-navbar-item">
        <span class="material-icons">school</span>
        <span>Alumnos</span>
      </li>
      <li *ngIf="canSeeStudentItems()" routerLink="/graficas" routerLinkActive="active" class="scoop-navbar-item">
        <span class="material-icons">bar_chart</span>
        <span>Gráficas</span>
      </li>
      <li *ngIf="canSeeTeacherItems()" routerLink="/materias" routerLinkActive="active" class="scoop-navbar-item">
        <span class="material-icons">library_books</span>
        <span>Materias</span>
      </li>

    </ul>
    <button class="scoop-logout-btn" (click)="logout()">
      <span class="material-icons">logout</span>
      <span>Cerrar sesión</span>
    </button>
  </nav>

  <!-- Scoop-style top navbar -->
  <nav class="scoop-navbar">
    <button class="dashboard-toggle-btn" *ngIf="isMobileView" (click)="toggleSidebar()" aria-label="Abrir menú">
      <span class="material-icons">menu_open</span>
    </button>
    <span class="scoop-navbar-logo">BUAP</span>
    <div class="scoop-navbar-icons">
      <span class="material-icons navbar-icon" (click)="togglePalette()" style="cursor:pointer">palette</span>
      <div class="scoop-navbar-avatar" *ngIf="userInitial">{{ userInitial }}</div>
    </div>
  </nav>

  <!-- Mobile sidebar overlay and menu -->
  <ng-container *ngIf="isMobileView">
    <div class="mobile-sidebar-overlay" [ngClass]="{'mobile-open': mobileOpen}" (click)="closeSidebar()"></div>
    <nav class="scoop-side-navbar" [ngClass]="{'mobile-open': mobileOpen}">
      <ul class="scoop-navbar-list">

        <li *ngIf="canSeeRegisterItem()" class="dropdown">
          <button class="scoop-navbar-item" type="button" data-bs-toggle="dropdown" aria-expanded="false"
            style="width: 100%; text-align: left; border: none; background: none;">
            <span class="material-icons">person_add</span>
            <span>Registro</span>
            <span class="dropdown-arrow">▼</span>
          </button>

          <ul class="dropdown-menu scoop-dropdown-menu" aria-labelledby="dropdownMenuButton">
            <li>
              <a class="dropdown-item scoop-dropdown-item" *ngIf="canSeeAdminItems()"
                routerLink="registro-usuarios/administrador" routerLinkActive="active" (click)="closeSidebar()">
                <span class="material-icons">admin_panel_settings</span>
                Registrar Admin
              </a>
            </li>
            <li>
              <a class="dropdown-item scoop-dropdown-item" routerLink="/registro-usuarios/maestro"
                *ngIf="canSeeTeacherItems()" routerLinkActive="active" (click)="closeSidebar()">
                <span class="material-icons">people</span>
                Registrar Maestro
              </a>
            </li>
            <li>
              <a class="dropdown-item scoop-dropdown-item" routerLink="/registro-usuarios/alumno"
                *ngIf="canSeeStudentItems()" routerLinkActive="active" (click)="closeSidebar()">
                <span class="material-icons">school</span>
                Registrar Alumno
              </a>
            </li>

            <li>
              <a class="dropdown-item scoop-dropdown-item" routerLink="/registro-usuarios/materias"
                *ngIf="canSeeAdminItems()" routerLinkActive="active" (click)="closeSidebar()">
                <span class="material-icons">library_books</span>
                Registrar Materias
              </a>
            </li>

          </ul>
        </li>

        <li *ngIf="canSeeAdminItems()" routerLink="/administrador" routerLinkActive="active" class="scoop-navbar-item"
          (click)="closeSidebar()">
          <span class="material-icons">admin_panel_settings</span>
          <span>Admins</span>
        </li>
        <li *ngIf="canSeeAdminItems()" routerLink="/maestros" routerLinkActive="active" class="scoop-navbar-item"
          (click)="closeSidebar()">
          <span class="material-icons">people</span>
          <span>Maestros</span>
        </li>
        <li *ngIf="canSeeStudentItems()" routerLink="/alumnos" routerLinkActive="active" class="scoop-navbar-item"
          (click)="closeSidebar()">
          <span class="material-icons">school</span>
          <span>Alumnos</span>
        </li>
        <li *ngIf="canSeeStudentItems()" routerLink="/graficas" routerLinkActive="active" class="scoop-navbar-item"
          (click)="closeSidebar()">
          <span class="material-icons">bar_chart</span>
          <span>Gráficas</span>
        </li>
        <li *ngIf="canSeeTeacherItems()" routerLink="/materias" routerLinkActive="active" class="scoop-navbar-item"
          (click)="closeSidebar()">
          <span class="material-icons">library_books</span>
          <span>Materias</span>
        </li>

      </ul>
      <button class="scoop-logout-btn" (click)="logout(); closeSidebar()">
        <span class="material-icons">logout</span>
        <span>Cerrar sesión</span>
      </button>
    </nav>
  </ng-container>
  <!-- end navbar-sidebar-wrapper -->